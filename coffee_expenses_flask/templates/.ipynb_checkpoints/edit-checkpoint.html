{% extends 'base.html' %}
{% block content %}
<h1>Edit Expense</h1>

<form class="card" method="post" action="{{ url_for('update', rid=rid) }}">
  <div class="form-grid">
    <label>
      <span>Date</span>
      <input type="date" name="date" required value="{{ date_value }}">
    </label>

    <label>
      <span>Amount (MXN)</span>
      <input type="number" step="0.01" name="amount" required value="{{ row['amount'] }}">
    </label>

    <label>
      <span>Type of Expense</span>
      <input type="text" name="expense_type" list="expenseTypes" value="{{ row['expense_type'] }}">
      <datalist id="expenseTypes">
        {% for t in expense_types %}
          <option value="{{ t }}"></option>
        {% endfor %}
      </datalist>
    </label>

    <label>
      <span>Category</span>
      <select name="category">
        <option {{ 'selected' if row['category']|lower == 'business' else '' }}>Business</option>
        <option {{ 'selected' if row['category']|lower == 'personal' else '' }}>Personal</option>
      </select>
    </label>

    <label>
      <span>Recurrence</span>
      {% set rec_opts = recurrence_options if recurrence_options is defined and recurrence_options|length > 0 else ["Fixed","Variable"] %}
      <select name="recurrence">
        {% for opt in rec_opts %}
          <option value="{{ opt }}" {{ 'selected' if row.get('recurrence','') == opt else '' }}>{{ opt }}</option>
        {% endfor %}
      </select>
    </label>

    <label>
      <span>Payment Method / Card</span>
      {% set pay_opts = payment_options if payment_options is defined and payment_options|length > 0 else ["Option 1","Option 2","Option 3","Option 4"] %}
      <select name="card">
        {% for opt in pay_opts %}
          <option value="{{ opt }}" {{ 'selected' if row.get('card','') == opt else '' }}>{{ opt }}</option>
        {% endfor %}
      </select>
    </label>

    <label class="span2">
      <span>Description</span>
      <textarea name="description" rows="2">{{ row['description'] }}</textarea>
    </label>
  </div>

  <div style="display:flex; gap:8px; margin-top:12px;">
    <button class="btn" type="submit">Save</button>
    <a class="btn ghost" href="{{ url_for('index') }}">Cancel</a>
  </div>
</form>
{% endblock %}
